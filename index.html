<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ø³ÛŒØ³ØªÙ… Ø²Ù…Ø§Ù†â€ŒØ³Ù†Ø¬ÛŒ</title>
  <link rel="manifest" href="manifest.json">
  
  <script>var APP_VERSION = "1.0.2";</script>
  
  <!-- Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡ Ø¢Ù¾Ø¯ÛŒØª (Ø§ÛŒÙ†Ù„Ø§ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù„ÙˆØ¯ Ø´Ø¯Ù†) -->
  <style>
    #maintenance-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #ffffff; z-index: 99999; display: none;
      flex-direction: column; align-items: center; justify-content: center;
      text-align: center; padding: 20px; box-sizing: border-box;
    }
    .update-icon { font-size: 4rem; margin-bottom: 20px; animation: bounce 2s infinite; }
    .update-title { color: #4285f4; font-size: 1.5rem; margin-bottom: 10px; font-family: Tahoma, sans-serif; }
    .update-text { color: #666; font-family: Tahoma, sans-serif; margin-bottom: 30px; line-height: 1.6; }
    .btn-refresh {
      background: #34a853; color: white; border: none; padding: 12px 30px;
      font-size: 1rem; border-radius: 50px; cursor: pointer;
      font-family: Tahoma, sans-serif; font-weight: bold;
      box-shadow: 0 4px 10px rgba(52,168,83,0.3);
    }
    @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-20px);} 60% {transform: translateY(-10px);} }
  </style>
</head>
<body>

  <!-- 1. ØµÙØ­Ù‡ Ø­Ø§Ù„Øª ØªØ¹Ù…ÛŒØ±Ø§Øª/Ø¢Ù¾Ø¯ÛŒØª -->
  <div id="maintenance-overlay">
    <div class="update-icon">ğŸš€</div>
    <h2 class="update-title">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø³ÛŒØ³ØªÙ…</h2>
    <p class="update-text">
      Ù…Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±ØªÙ‚Ø§ÛŒ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ù‡Ø³ØªÛŒÙ….<br>
      Ù„Ø·ÙØ§Ù‹ Ú†Ù†Ø¯ Ù„Ø­Ø¸Ù‡ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ØŒ Ø³Ù¾Ø³ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ ØªØ§ Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´ÙˆØ¯.
    </p>
    <button class="btn-refresh" onclick="forceReload()">Ø¯Ø±ÛŒØ§ÙØª Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯</button>
  </div>

  <!-- 2. Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
  <div id="loading-overlay" class="hidden">
    <div class="spinner"></div>
    <p class="loading-text">...</p>
  </div>

  <!-- 3. Ø¢Ù„Ø±Øª -->
  <div id="custom-alert-overlay" class="hidden">
    <div class="custom-alert-box">
      <div id="alert-icon" class="alert-icon"></div>
      <h3 id="alert-title" class="alert-title"></h3>
      <p id="alert-message" class="alert-message"></p>
      <div class="alert-buttons">
        <button id="alert-ok" class="btn btn-primary">ØªØ§ÛŒÛŒØ¯</button>
        <button id="alert-cancel" class="btn btn-gray hidden">Ù„ØºÙˆ</button>
      </div>
    </div>
  </div>

  <!-- 4. Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† -->
  <div id="app-root" class="app-container"></div>

  <script>
    // ØªØ§Ø¨Ø¹ Ø±ÙØ±Ø´ Ø³Ø®Øª Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯
    function forceReload() {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for(let registration of registrations) {
            registration.unregister(); // Ø­Ø°Ù Ø³Ø±ÙˆÛŒØ³ ÙˆØ±Ú©Ø± Ù‚Ø¯ÛŒÙ…ÛŒ
          }
          window.location.reload(true); // Ø±ÙØ±Ø´ Ú©Ø§Ù…Ù„
        });
      } else {
        window.location.reload(true);
      }
    }

    var css = document.createElement('link');
    css.rel = 'stylesheet';
    css.href = 'css/style.css?v=' + APP_VERSION;
    document.head.appendChild(css);

    var js = document.createElement('script');
    js.src = 'js/app.js?v=' + APP_VERSION;
    document.body.appendChild(js);

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>